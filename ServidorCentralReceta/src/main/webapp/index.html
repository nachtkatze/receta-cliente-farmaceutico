<!DOCTYPE html>
<html lang="es">

<head>
    <meta http-equiv="content-type" content="text/html" charset="iso-8859-1">

    <!-- javascript libs-->
    <script type="text/javascript" src="/isst/faces/javax.faces.resource/lib/jquery-1.8.2.js?ln=js"></script>
    <script type="text/javascript" src="/isst/faces/javax.faces.resource/lib/jquery-ui-1.9.2.custom.min.js?ln=js"></script>
    <script type="text/javascript" src="/isst/faces/javax.faces.resource/lib/knockout-2.1.0.js?ln=js"></script>
    <script type="text/javascript" src="/isst/faces/javax.faces.resource/lib/knockout.mapping.js?ln=js"></script>
    <script type="text/javascript" src="/isst/faces/javax.faces.resource/lib/blockUI.js?ln=js"></script>

    <link rel="shortcut icon" href="img/favicon.ico" >

    <!-- FOUNDATION -->
    <link rel="stylesheet" href="/isst/faces/javax.faces.resource/foundation.css?ln=css" />
    <script src="/isst/faces/javax.faces.resource/vendor/modernizr.js?ln=js"></script>

   
    <script type="text/javascript" src="/isst/faces/javax.faces.resource/mvvm.js?ln=js"></script>

  
    
  <title>Farmacia</title>

</head>

<body>
  <div class="grid flex">
    <h1 style="text-align:center;">Receta Farmacéutica</h1>

      <!-- <ul class="folders" data-bind="foreach: folders" >
      <li><a data-bind="attr:{ 'href': '#' }, click: $root.goToFolder"><span data-bind="text: $data"></span></a></li>
      </ul> --> 
  
     <!-- Menu con botones -->
<!--     <ul class="menu">
      <button data-bind="click: home">Home</button>
      <button data-bind="click: formu">Nuevo Cliente</button>
      <button data-bind="click: logIn">Log In</button>
    </ul> -->
   <!--  <nav class="top-bar" data-topbar>
      <ul class="title-area">
        <li><a data-bind="attr:{ 'href': '#' }, click: $root.home">Home</a></li>
        <li><a data-bind="attr:{ 'href': '#' }, click: $root.formu">Formulario</a></li>
        <li><a data-bind="attr:{ 'href': '#' }, click: $root.logIn">Log In</a></li>
      </ul>
    </nav> -->

    <nav class="top-bar docs-bar" data-topbar>
      <ul class="title-area">
        <li class="name">
          <h1><a data-bind="attr:{ 'href': '#' }, click: $root.home">Receta Farmacéutica</a></h1> 
        </li>
        <li class="toggle-topbar menu-icon"><a href="#">Menu</a></li>
        <li class="divider"></li>
      </ul>
      <section class="top-bar-section"> 
          <!-- Left Nav Section --> 
        <ul class="left">
          <li class="divider"></li>
          <li><a data-bind="attr:{ 'href': '#' }, click: $root.formu">Nuevo Cliente</a></li> 
          <li class="divider"></li>
         <!--  <li><a data-bind="attr:{ 'href': '#' }, click: $root.trampa">Login automatico (eliminar)</a></li> 
          <li class="divider"></li> -->
        </ul> 
         <!-- Right Nav Section --> 
        <ul class="right">
          <li class="divider"></li>
          <li class="has-form" data-bind="ifnot: valid"><a data-bind="attr:{ 'href': '#' }, click: $root.logIn " >Log In</a></li>
          <li class="has-form" data-bind="if: valid"><a data-bind="attr:{ 'href': '#' }, click: $root.logOut">Log Out</a></li>  
        </ul>
      </section>
    </nav>

      <!-- HOME -->
    <div data-bind="visible: pagina()== 'home'" style="margin:40px 50px 15px;">
      <p>Esto es el menu</p>
      <button data-bind="click: formu">Ir al formulario</button>
    </div>


      <!-- NUEVO CLIENTE -->
    <div data-bind="visible: pagina()=='formulario' ">
      <form style="margin:40px 50px 15px;">
        <label>Introduzca a continuación el TSI del cliente: 
          <input id="clienteInput" data-bind="value: tsi" size="13"/>
          <p id="errorInput" data-bind="text: 'Introduzca un numero de TSI correcto, por favor'"></p>
          <p align:"center">
          <button id="botonRecetas" style="text-align:center; margin: 40px" data-bind="click: listaCliente" size="13">Aceptar</button>
        </p>
        </label>
    </div>


    <!-- RECETAS CLIENTE  (poner delante del login, si no, no funciona)-->
    <div data-bind="visible: pagina()=='listaCliente'" style="margin:40px 50px 15px;">
      <p>Hola cliente con TSI: <strong data-bind="text: tsi"></strong></p>
      <p id="noRecetas">No hay recetas con ese TSI de paciente</p>
      <!-- <p data-bind="text: seats()[0].name"></p> -->
      <div id="tabla">
      <p>Lista de recetas del paciente:</p>
      	<table >
    		<thead><tr>
        		<th>Nombre medicamento</th><th>Fecha</th><th>Paciente</th><th>Tarjeta paciente</th><th>Posología</th>
        		<th>Seleccionar</th>
    			</tr></thead>
    		<tbody data-bind="foreach: recetas">
        		<tr>
            		<td data-bind="text: nombre"></td>
            		<td data-bind="text: fecha"></td>
            		<td data-bind="text: paciente"></td>
            		<td data-bind="text: tarjetaSS"></td>
            		<td data-bind="text: posologia"></td>
            		<td><input type="radio" data-bind="attr:{value: $index()}, checked: $parent.recetasSeleccionadas"/></td>
        		</tr>    
    		</tbody>
		</table>
		 <button data-bind="click: resumen">Ir al resumen</button>
		</div>
     
    </div>
   <!--  <div id="otraReceta">
    	<button data-bind="click: listaCliente">Expedir otra receta</button>
    </div> -->

      <!-- RESUMEN -->
    <div class="large-9 columns" data-bind="if: recetas()[0]  != undefined && ! isNaN(offset())">
      <div data-bind="visible: pagina()=='resumen'">
        <h3 style="text-align:center;">Resumen Medicamento</h3>
        <table>
          <tbody>
            <tr>
              <td>TSI Cliente: </td>
              <td><strong data-bind="text:tsi"></strong></td>
            </tr>
            <tr>
              <td>Le ha atendido: </td>
              <td><strong data-bind="text:farmaceutico"></strong></td>
            </tr>
            <tr>
              <td>Farmacia: </td>
              <td><strong data-bind="text:farmacia"></strong></td>
            </tr>
            <tr>
              <td>Medicamento: </td>
              <td><strong data-bind="text: recetas()[offset()].nombre"></strong></td>
            </tr>
            <tr>
              <td>Fecha:</td>
              <td><strong id="today"></strong></td>
            </tr>
            <tr>
              <td>Forma de pago</td>
              <td><select data-bind="options:formasPago, value: pago">
              </select></td>
            </tr>
            <tr>
              <td>Importe:</td>
              <td>
                <input type="text"  data-bind="value: Math.floor(Math.random()*10)" style="margin-right: 35px "/>
              </td>
            </tr>
            <tr>
              <td>Forma de administración: </td>
              <td><textarea placeholder="Introduzca dosis" data-bind="value: recetas()[offset()].posologia"></textarea></td>
            </tr>
            <tr>
              <td>Comentarios adicionales:</td>
              <td><textarea placeholder="Introduzca cualquier comentario adicional"></textarea></td>
            </tr>
          </tbody>
        </table>
        <button data-bind="click: expedir">Confirmar</button>
      </div>
    </div>
  





     <!-- LOG IN -->
    <div data-bind="visible: pagina()=='login'" class="row">
      <p>Login</p>
      <form name="myform">
        <div class="large-10 large-push-2 columns">
          <fieldset>
            <legend>Log In</legend>
            <div class="row">
              <div class="large-10 large-push-2 columns">
                <label>Username</label>
                  <input id="username" type="username" required>
                <label for="password">Password <small>required</small>
                      <input id="password" type="password" required></input>
                </label>
              </div>
            </div>
            <div style="text-align:right">
              <button data-bind="click: validate">Submit</button>
            </div>
          </fieldset>
        </div>
      </div>

  </div>
  <div class="imageMadrid">
  	<img src="http://www.pasoa2.com/Files/32438/Img/03/Logo_ComunidadMadrid.jpg" 
  	alt="Comunidad de Madrid" height="300" width="300">
  </div>
</body>
</html>





